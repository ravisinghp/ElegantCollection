Collecting workspace information

This project is a FastAPI-based backend for authenticating users via Microsoft login (OAuth2), fetching their emails from Microsoft Graph API, and saving attachments locally. Hereâ€™s a breakdown of its structure and functionality:

Purpose
Authenticate users using Microsoft OAuth2.
Fetch emails from the user's Microsoft account (Outlook).
Download and save attachments from emails containing keywords like "search", "research", or "r&d".
Main Components
1. Configuration & Environment
.env: Stores sensitive credentials (client ID, secret, tenant ID, redirect URI, Graph API endpoint).
requirements.txt: Lists Python dependencies (FastAPI, httpx, python-dotenv, etc.).
Dockerfile & docker-compose.yml: For containerizing and running the app.
2. Application Code (app/)
a. Entry Point
main.py:
Creates the FastAPI app.
Adds CORS middleware for frontend access.
Registers the authentication router (app/routers/auth.py).
b. Authentication & Email Logic
auth_service.py:
Loads environment variables.
Builds the Microsoft OAuth2 authorization URL (get_auth_url).
Exchanges authorization code for access token (exchange_code_for_token).
Fetches emails and downloads attachments (fetch_mails).
c. API Routes
auth.py:
/auth/login: Returns the Microsoft login URL.
/auth/callback: Handles OAuth2 callback, exchanges code for token, redirects to frontend.
/auth/emails: Accepts access token, fetches emails, and returns results.
d. Attachments
attachments: Directory where email attachments are saved.
How It Works
User clicks login on the frontend, which calls /auth/login to get the Microsoft OAuth2 URL.
User authenticates with Microsoft and is redirected to /auth/callback with a code.
Backend exchanges code for an access token, then redirects to the frontend with the token.
Frontend sends token to /auth/emails to fetch emails.
Backend fetches emails using Microsoft Graph API, filters for keywords, downloads attachments, and returns email data.
Running the Project
Local:
Install dependencies: pip install -r requirements.txt
Run: uvicorn app.main:app --reload
Docker:
Build and run: docker-compose up
Key Files
main.py: FastAPI app setup.
auth.py: API endpoints for authentication and email fetching.
auth_service.py: Microsoft OAuth2 and email logic.
Dockerfile: Container setup.
docker-compose.yml: Multi-container orchestration.
.env: Credentials and configuration.
Summary:
This backend enables Microsoft login, fetches user emails via Graph API, and saves relevant attachments, all exposed via FastAPI endpoints.